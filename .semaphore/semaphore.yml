version: v1.0
name: Probando semaphore
agent:
  machine:
    type: f1-standard-2
    os_image: ubuntu2204
blocks:
  - name: Instalar y ejecutar pruebas
    task:
      jobs:
        - name: Tests con Go
          commands:
            - checkout
            - name: Instalar Just
              command: |
                mkdir -p /tmp/bin
                curl -fsSL https://just.systems/install.sh | bash -s -- --to /tmp/bin
                export PATH="/tmp/bin:$PATH"
            - name: Verificar Just
              command: |
                export PATH="/tmp/bin:$PATH"
                just --version
            - name: Ejecutar pruebas
              command: |
                export PATH="/tmp/bin:$PATH"
                just test
